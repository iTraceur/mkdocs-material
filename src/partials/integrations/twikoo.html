<!-- Set from config but allow override -->
{% set twikoo = config.extra.twikoo %}
{% if page and page.meta and page.meta.twikoo is mapping %}
  {% set twikoo = page.meta.twikoo %}
{% endif %}

<!-- Twikoo integration -->
{% if not page.is_homepage and twikoo and twikoo.display != false %}
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.3.0/dist/twikoo.all.min.js"></script>
  <h2 style="margin-bottom: 1.33em">
    <span class="twemoji">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M1.5 2.75a.25.25 0 0 1 .25-.25h8.5a.25.25 0 0 1 .25.25v5.5a.25.25 0 0 1-.25.25h-3.5a.75.75 0 0 0-.53.22L3.5 11.44V9.25a.75.75 0 0 0-.75-.75h-1a.25.25 0 0 1-.25-.25v-5.5zM1.75 1A1.75 1.75 0 0 0 0 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 0 0 2.487 1.03L7.061 10h3.189A1.75 1.75 0 0 0 12 8.25v-5.5A1.75 1.75 0 0 0 10.25 1h-8.5zM14.5 4.75a.25.25 0 0 0-.25-.25h-.5a.75.75 0 1 1 0-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 14.25 12H14v1.543a1.457 1.457 0 0 1-2.487 1.03L9.22 12.28a.75.75 0 1 1 1.06-1.06l2.22 2.22v-2.19a.75.75 0 0 1 .75-.75h1a.25.25 0 0 0 .25-.25v-5.5z"></path>
      </svg>
    </span>
    评论
  </h2>
  <div id="tcomment"></div>
  <script>
    twikoo.init({
      envId: '{{ config.extra.twikoo.env_id }}',
      el: '#tcomment',
      // region: 'ap-guangzhou', // 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数
      // path: 'window.location.pathname', // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数
    })
  </script>
{% endif %}
